<!doctype html>
<html ⚡ lang="en" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="utf-8">
  <meta name="theme-color" content="#ffffff"/>
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <meta name="msvalidate.01" content="C02D47D34B2CA730AA994096C315F5FE" />
  <meta name="description" content="They're not obvious to me at first glance.">

  <link rel="manifest" href="/manifest.json">

  
  

  <!-- define the title tag -->
<title>
  
    Understanding the Role of Total Order Broadcast in Linearizability and Sequential Consistency
  
</title>


  
    <link rel="canonical" href="https://haoluo.io/posts/total-order-broadcast-consistency-model" />
    <link rel="alternate" media="handheld" href="https://haoluo.io/posts/total-order-broadcast-consistency-model" />
  

  <!-- favicons -->
<link rel="apple-touch-icon-precomposed" sizes="57x57" href="/assets/favicons/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/favicons/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/favicons/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="/assets/favicons/apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="/assets/favicons/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="192x192" href="/assets/favicons/apple-touch-icon-192x192.png" />
<link rel="apple-touch-icon-precomposed" sizes="512x512" href="/assets/favicons/apple-touch-icon-512x512.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="/assets/favicons/apple-touch-icon-76x76.png" />
<link rel="icon" type="image/png" href="/assets/favicons/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="/assets/favicons/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/assets/favicons/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="/assets/favicons/favicon-128.png" sizes="128x128" />
<meta name="msapplication-square70x70logo" content="/assets/favicons/mstile-70x70.png" />

  <!-- feed link -->
  <link type="application/atom+xml" rel="alternate" href="https://haoluo.io/feed.xml" title="Articles by Hao Luo">

  
    <link href="https://fonts.googleapis.com/css?family=Cormorant+Garamond:700|Lato:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    
      <style amp-custom="" type="text/css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15; /* @alternate */ ;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline; /* @alternate */ ;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{ /* @alternate */ ;-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{ /* @alternate */ ;-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{ /* @alternate */ ;-webkit-appearance:none}::-webkit-file-upload-button{ /* @alternate */ ;-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}#iubenda-cs-banner{bottom:0px;left:0px;position:fixed;width:100%;z-index:99999998;background-color:black}.iubenda-cs-content{display:block;margin:0 auto;padding:20px;width:auto;font-family:Helvetica, Arial, FreeSans, sans-serif;font-size:14px;background:#000;color:#fff}.iubenda-cs-rationale{max-width:900px;position:relative;margin:0 auto}.iubenda-banner-content>p{font-family:Helvetica, Arial, FreeSans, sans-serif;line-height:1.5}.iubenda-cs-close-btn{margin:0;color:#fff;text-decoration:none;font-size:14px;position:absolute;top:0;right:0;border:none}.iubenda-cs-cookie-policy-lnk{text-decoration:underline;color:#fff;font-size:14px;font-weight:900}.resp-container{position:relative;overflow:hidden;padding-top:100%}.resp-iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:0}*,*::before,*::after{box-sizing:border-box}html{font-size:17px}body{margin:0 auto;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; /* @alternate */ ;-webkit-font-smoothing:antialiased;font-weight:400;line-height:1.7;color:#1a1a1a;background:#fff;min-height:100vh;display:flex;flex-direction:column}main{flex:1;display:flex;flex-direction:column}p{margin:0;font-weight:400}b,strong{font-weight:600}h1,h2,h3,h4,h5,h6{margin:0;line-height:1.5;text-rendering:optimizeLegibility}h1{font-size:30.6px;font-weight:600;letter-spacing:-.02em;color:#1a1a1a}h2{font-size:24.65px;font-weight:600;color:#1a1a1a}h3{font-size:21.25px;font-weight:600}h4{font-size:18.7px;font-weight:600}h5{font-size:19.89px;font-weight:500}h6{font-size:17px}@media all and (max-width: 767px){h1{font-size:25.5px}h2{font-size:22.95px}h3{font-size:21.25px}}a{color:#1a1a1a;text-decoration:underline; /* @alternate */ ;-webkit-text-decoration-color:#1a1a1a;text-decoration-color:#1a1a1a;transition:color 0.2s linear}a:hover,a:active{color:#777}a:focus{color:#777;outline:none}ul,ol{padding-left:40px;margin:0}abbr{cursor:help;border-bottom:1px dotted #ddd}blockquote{padding:0 0 0 15px;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;font-size:17px;line-height:1.6;color:#999;font-style:italic;border-left:1px solid #999}hr{margin:0;border-top:0;border-right:0;border-bottom:1px solid #ddd;border-left:0}img{display:block;max-width:100%;max-height:500px;margin:0;margin-left:auto;margin-right:auto}img+em{text-align:center;display:block;font-size:14.45px;margin:-16px auto}figure .image{width:100%}figure.post{text-align:center;display:table;max-width:100%;margin:20px auto}figcaption.post{display:block;font-size:14.45px;font-style:italic;margin-top:-16px}figure.photo{text-align:center;display:table;max-width:100%;margin:80px auto 100px auto}figcaption.photo{display:block;color:#000;font-size:19.04px;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;margin-top:4px}::-moz-selection{color:#fff;background-color:#1a1a1a}::selection{color:#fff;background-color:#1a1a1a}.text-center{text-align:center}.clearfix:after{content:" ";visibility:hidden;display:block;height:0;clear:both}.desaturate{filter:gray;filter:grayscale(100%)}.no-text-decoration{text-decoration:none}.pace{ /* @alternate */ ;-webkit-pointer-events:none;pointer-events:none; /* @alternate */ ;-ms-user-select:none; /* @alternate */ ;-webkit-user-select:none; /* @alternate */ ;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#000000;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:1px}.notfound-wrapper{margin-top:100px;margin-bottom:100px;text-align:center}.highlight{padding:10px 50px 10px 50px}@media all and (max-width: 767px){.highlight{padding:10px 20px 10px 20px}}table{border-collapse:collapse;width:100%;table-layout:fixed;border:1px solid #999;margin-bottom:24px}table th{padding:3px 10px;background-color:white;border:1px solid #999}table td{border:1px solid #999;padding:3px 10px}.coffee-kudo{margin-top:4px}.home-container{display:block;max-width:520px}.home-text-container{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;color:#000}.home-text-container p{margin-bottom:10px}.menu-list{margin:20px 0;padding-left:0;list-style:square inside}.menu-list li{padding:4px 0}li.menu-list-item a{font-weight:400;font-size:1.2em;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;line-height:1.33333em;color:#1a1a1a}a:hover .emoji-hover{opacity:1}.emoji-hover{display:inline-block;vertical-align:middle;opacity:0;transition:opacity 0.2s linear;margin-left:10px}.footer{display:block;width:100%;text-align:center;padding:40px 0;margin-top:auto;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif}.footer p{font-size:12px;color:#1a1a1a}.footer a{text-decoration:underline; /* @alternate */ ;-webkit-text-decoration-color:#1a1a1a;text-decoration-color:#1a1a1a;color:#1a1a1a}.footer a:hover{color:#777}.footer-links{float:none;display:block;text-align:center;padding:0;margin:0 0 8px 0;list-style:none}.footer-links li{display:inline-block;margin:0 10px;vertical-align:middle}.footer-links li a{font-size:18px;color:#555;fill:#555}.footer-links li a:hover{color:#000;fill:#000}@media all and (max-width: 520px){.footer-links li{margin:0 10px}.footer-links li:last-child{margin-right:0}}.icon-freecodecamp{padding-top:4px}.grid-wrapper{min-height:100%;display:grid;grid-template-rows:auto 1fr auto}.grid{display:block;padding:0;margin:0 -24px;font-size:0;text-align:left}.grid-cell{display:inline-block;width:100%;padding:0 24px;margin:0;font-size:17px;text-align:left;vertical-align:top}.grid-cell.with-1col{width:8.3333333333%}.grid-cell.with-2col{width:16.6666666667%}.grid-cell.with-3col{width:25%}.grid-cell.with-4col{width:33.3333333333%}.grid-cell.with-5col{width:41.6666666667%}.grid-cell.with-6col{width:50%}.grid-cell.with-7col{width:58.3333333333%}.grid-cell.with-8col{width:66.6666666667%}.grid-cell.with-9col{width:75%}.grid-cell.with-10col{width:83.3333333333%}.grid-cell.with-11col{width:91.6666666667%}.grid-cell.with-1off{margin-left:8.3333333333%}.grid-cell.with-2off{margin-left:16.6666666667%}.grid-cell.with-3off{margin-left:25%}.grid-cell.with-4off{margin-left:33.3333333333%}.grid-cell.with-5off{margin-left:41.6666666667%}.grid-cell.with-6off{margin-left:50%}.grid-cell.with-7off{margin-left:58.3333333333%}.grid-cell.with-8off{margin-left:66.6666666667%}.grid-cell.with-9off{margin-left:75%}.grid-cell.with-10off{margin-left:83.3333333333%}.grid-cell.with-11off{margin-left:91.6666666667%}.grid-cell.is-centered{text-align:center}.grid-cell.is-right{text-align:right}.grid-cell.is-top{vertical-align:top}.grid-cell.is-middle{vertical-align:middle}.grid-cell.is-bottom{vertical-align:bottom}.default-grid-centered{max-width:720px;margin-left:auto;margin-right:auto}.home-grid-centered{max-width:720px;margin:40px auto}@media all and (max-width: 767px){.grid-cell.with-1col{width:100%}.grid-cell.with-1off{margin-left:0}.grid-cell.with-2col{width:100%}.grid-cell.with-2off{margin-left:0}.grid-cell.with-3col{width:100%}.grid-cell.with-3off{margin-left:0}.grid-cell.with-4col{width:100%}.grid-cell.with-4off{margin-left:0}.grid-cell.with-5col{width:100%}.grid-cell.with-5off{margin-left:0}.grid-cell.with-6col{width:100%}.grid-cell.with-6off{margin-left:0}.grid-cell.with-7col{width:100%}.grid-cell.with-7off{margin-left:0}.grid-cell.with-8col{width:100%}.grid-cell.with-8off{margin-left:0}.grid-cell.with-9col{width:100%}.grid-cell.with-9off{margin-left:0}.grid-cell.with-10col{width:100%}.grid-cell.with-10off{margin-left:0}.grid-cell.with-11col{width:100%}.grid-cell.with-11off{margin-left:0}.default-grid-centered{max-width:100%;margin-left:auto;margin-right:auto}.home-grid-centered{max-width:100%;margin:0 auto auto auto}}.about{padding:100px 0}.about h1{margin:50px 0 15px}.technology-list-ul{padding:0;border-left:1px solid #eaeaea;width:100%;margin:24px 0 0 0;vertical-align:baseline;position:relative}.technology-list-li{vertical-align:baseline;position:relative;margin:0;padding:0;list-style:none;display:block;float:left;border:1px solid #eaeaea;width:20%; /* @alternate */ ;text-align:-webkit-match-parent}.technology-list-a-svg{content:'';width:100%;height:0;padding:100% 0 0 0;display:block;color:#282828;text-decoration:none;vertical-align:baseline;position:relative}.technology-list-a-svg svg{position:absolute;top:35%;left:25%;width:50%;height:30%;opacity:0.5;transition:all 0.3s;box-sizing:inherit}.article{display:block;margin:80px 0}h5.artical-list-title{display:block;margin-top:60px;font-size:1.8em}.article-list{display:block;padding:0;margin:40px 0;list-style:none}.article-list li{position:relative;display:block;padding:24px 0;border-bottom:1px solid #ddd}.article-list li:last-child{border-bottom:0}.article-list li.article-pagination{display:table;width:100%;margin-top:-15px}.article-list li.article-pagination a{display:inline-block;padding-top:6px;font-size:11px;font-weight:600;letter-spacing:.1em;color:#666;text-decoration:none;text-transform:uppercase;transition:color 0.2s linear}.article-list li.article-pagination a .icon{display:inline-block;margin-top:-2px;font-size:20px;vertical-align:middle}.article-list li.article-pagination a:hover{color:#1a1a1a}.article-list-item a{text-decoration:none;display:block;transition:transform 0.2s ease}.article-list-item a:hover{transform:translateZ(0) scale(1.005)}.article-list-item a h5{position:relative;display:block;padding-right:25px;color:#1a1a1a;border-bottom:1px solid transparent;transition:color 0.2s ease}.article-list-item a h5 .icon{display:inline-block;margin-top:-2px;vertical-align:middle;opacity:0;transition:opacity 0.2s linear}.article-list-item a:hover h5{color:#777}.article-list-item a:hover h5 .icon{opacity:1}.article-list-item p{display:block;margin:12px 0 10px;font-size:15px;color:#777}.article-list-footer{display:block}.article-list-footer span,.article-list-footer a{display:inline-block;font-size:12px;color:#777;text-transform:uppercase;vertical-align:middle}.article-list-footer a{color:#777}.article-list-footer a:hover{color:#1a1a1a}.article-list-footer .article-list-tags a{margin-right:4px}.article-list-footer .article-list-tags a:last-child{margin-right:0}.article-list-divider{display:none}.article-list-tags{display:inline-block;vertical-align:top;margin-left:15px}.article-empty{display:block;margin:100px 0;font-style:italic;color:#999;text-align:center}.article-pagination-right{float:right}.article-header{display:block;padding-bottom:30px;margin-bottom:30px;border-bottom:1px solid #ddd}.article-header h1{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;font-weight:700;font-size:34px;letter-spacing:-0.02em}.article-header p{display:block;margin:12px 0 10px;font-size:17px;color:#777}.article-header a{text-decoration:none}.language-switch{display:block;margin-top:16px;margin-bottom:4px}.language-switch-button{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;font-size:13px;font-weight:500;color:#777;background:transparent;border:1px solid #ddd;border-radius:4px;text-decoration:none;transition:all 0.2s ease}.language-switch-button:hover{color:#1a1a1a;border-color:#1a1a1a;background:rgba(221,221,221,0.1)}.language-switch-button .language-icon{width:14px;height:14px;opacity:0.7;transition:opacity 0.2s ease}.language-switch-button:hover .language-icon{opacity:1}.language-switch-button span{line-height:1}.article-content{display:block}.article-content p,.article-content ul,.article-content ol,.article-content img,.article-content blockquote{display:block;margin-top:1.5rem;margin-bottom:1.5rem;margin-left:auto}.article-content h2,.article-content h3,.article-content h4{margin-top:3rem;margin-bottom:1.5rem;letter-spacing:-0.04em;line-height:1.5rem;color:#1a1a1a;font-weight:400}.article-content blockquote p{margin-bottom:0}.article-content img.emoji{display:inline-block;margin-top:-4px;margin-bottom:0;vertical-align:middle}.article-comments{display:block;padding-top:20px;margin-top:30px;border-top:1px solid #ddd}.article-share{display:block;margin-top:-4px}.article-share a{display:inline-block;margin-right:12px;vertical-align:middle}.article-share a i{vertical-align:middle;transition:fill 0.2s linear;fill:#999;width:20px}.article-share a:hover i{fill:#555}.archive-container{display:block;margin:40px 0}h1+.archive-container{margin-top:0}.archive-year-section{display:block;margin-bottom:40px}.archive-year-section:last-child{margin-bottom:0}.archive-year-header{font-size:24px;font-weight:700;color:#1a1a1a;margin-bottom:20px;letter-spacing:-0.02em}.archive-list{display:block;padding:0;margin:0;list-style:none}.archive-item{display:grid;grid-template-columns:140px 1fr;grid-template-areas:"date title";align-items:baseline;gap:20px;padding:16px 0;border-bottom:1px solid rgba(221,221,221,0.15)}.archive-item:last-child{border-bottom:none}.archive-date{grid-area:date;display:block;font-size:13px;font-weight:400;color:#777;letter-spacing:0.02em;white-space:nowrap}.archive-title{grid-area:title;display:inline-block;font-size:16px;font-weight:500;color:#1a1a1a;text-decoration:none; /* @alternate */ ;transition:-webkit-text-decoration 0.2s ease;transition:text-decoration 0.2s ease; /* @alternate */ ;transition:text-decoration 0.2s ease, -webkit-text-decoration 0.2s ease}.archive-title:hover{text-decoration:underline}.archive-emoji{display:inline-block;margin-left:6px;font-size:14px;opacity:0;transition:opacity 0.2s ease}.archive-item:hover .archive-emoji{opacity:1}.archive-tags{grid-area:tags;display:flex;gap:6px;flex-wrap:wrap;justify-content:flex-end}.archive-tag{display:inline-block;font-size:11px;font-weight:500;color:#777;text-decoration:none;text-transform:uppercase;letter-spacing:0.05em;transition:color 0.2s ease}.archive-tag:hover{color:#1a1a1a}@media all and (max-width: 767px){.archive-container{margin:0 0 20px 0}.archive-item{grid-template-columns:1fr;grid-template-areas:"date" "title";gap:4px;padding:12px 0}.archive-date{font-size:11px;text-transform:uppercase}.archive-title{font-size:15px}.archive-tags{justify-content:flex-start}.archive-tag{font-size:10px}.article-list-item a{position:relative;display:block;padding-left:0px;font-weight:400;font-size:1em;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;color:#1a1a1a}.article-list-footer{display:block;font-size:11px}.article-list-footer span{font-size:11px}.article-list-footer a{font-size:11px;color:#777}.article-list-divider{display:none}.article-list-tags{display:block;margin-top:4px;margin-left:0}.article-list-tags a{display:inline}}.embed-responsive{position:relative;display:block;height:0;padding:0;padding-bottom:75%;margin-bottom:30px;overflow:hidden}.embed-responsive iframe,.embed-responsive embed,.embed-responsive object,.embed-responsive video{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0}.embed-responsive-16by9{padding-bottom:56.25%}.header-nav{position:fixed;top:0;left:0;right:0;background-color:#fff;z-index:1000;box-shadow:0 2px 4px rgba(0,0,0,0.1)}.header-nav-inner{max-width:720px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:20px 24px}main{padding-top:80px}.header-logo-container{position:relative;display:flex;align-items:center;gap:8px;top:auto;left:auto;z-index:100}.header-logo{display:block;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;font-size:1.5em;font-weight:700;color:#1a1a1a;text-decoration:none;margin-bottom:0}.header-divider{display:inline-block;color:#1a1a1a;font-size:1.2em}.header-emojis{display:flex;gap:8px}.header-emojis a{font-size:20px;text-decoration:none;transition:transform 0.2s ease}.header-emojis a:hover{transform:scale(1.2)}.header-icon{font-size:25px}.header-icon-link{text-decoration:none}.hash-icon-header{font-size:19px}.header-links{padding:0;margin:0;list-style:none;display:flex;align-items:center;gap:32px}.header-links li{display:inline-block;margin:0;vertical-align:middle}.header-links li a{font-size:16px;font-weight:500;color:#555;text-decoration:none;border-bottom:2px solid transparent;padding-bottom:2px;transition:border-color 0.2s linear}.header-links li a:hover{color:#000}.header-links li a.active{border-bottom-color:#555}.mobile-menu-toggle{display:none;flex-direction:column;justify-content:space-around;width:30px;height:25px;background:transparent;border:none;cursor:pointer;padding:0;z-index:1001}.mobile-menu-toggle .hamburger-line{width:30px;height:3px;background-color:#555;border-radius:2px;transition:all 0.3s ease;transform-origin:center}.mobile-menu-toggle.active .hamburger-line:nth-child(1){transform:translateY(8px) rotate(45deg)}.mobile-menu-toggle.active .hamburger-line:nth-child(2){opacity:0}.mobile-menu-toggle.active .hamburger-line:nth-child(3){transform:translateY(-8px) rotate(-45deg)}@media all and (max-width: 520px){.header-nav{padding:0}.header-nav-inner{padding:15px 24px;max-width:100%}.header-logo-container{gap:6px}.header-logo{font-size:1.2em}.header-divider{font-size:1em}.header-emojis{gap:4px}.header-emojis a{font-size:16px}.mobile-menu-toggle{display:flex}.header-links{position:fixed;top:60px;right:-100%;width:250px;height:calc(100vh - 60px);background-color:#fff;flex-direction:column;align-items:flex-start;gap:0;padding:20px;box-shadow:-2px 0 8px rgba(0,0,0,0.1);transition:right 0.3s ease}.header-links.active{right:0}.header-links li{width:100%;margin:0;padding:15px 0;border-bottom:1px solid rgba(128,128,128,0.2)}.header-links li:last-child{border-bottom:none}.header-links li a{display:inline-block;width:auto;font-size:18px}main{padding-top:100px}}@media all and (max-width: 767px){.header-nav{padding:0}.header-nav-inner{padding:15px 24px;max-width:100%}.mobile-menu-toggle{display:flex}.header-links{position:fixed;top:60px;right:-100%;width:250px;height:calc(100vh - 60px);background-color:#fff;flex-direction:column;align-items:flex-start;gap:0;padding:20px;box-shadow:-2px 0 8px rgba(0,0,0,0.1);transition:right 0.3s ease}.header-links.active{right:0}.header-links li{width:100%;margin:0;padding:15px 0;border-bottom:1px solid rgba(128,128,128,0.2)}.header-links li:last-child{border-bottom:none}.header-links li a{display:inline-block;width:auto;font-size:18px}main{padding-top:100px}}.highlight{padding:5px;margin:0;margin:0;overflow:auto;font-weight:400;background:#faf9f9;border-radius:4px}.highlight pre{margin:0}.highlighter-rouge{padding:4px 4px;font-size:16px;color:#121111;background:#faf9f9;border-radius:1px}@media all and (max-width: 767px){.highlight{padding:25px;font-size:16px}}.highlight .c{font-style:italic;color:#998}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k{font-weight:bold}.highlight .o{font-weight:bold}.highlight .cm{font-style:italic;color:#998}.highlight .cp{font-weight:bold;color:#999}.highlight .c1{font-style:italic;color:#998}.highlight .cs{font-style:italic;font-weight:bold;color:#999}.highlight .gd{color:#000;background-color:#fdd}.highlight .gd .x{color:#000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .gi .x{color:#000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#aaa}.highlight .gt{color:#a00}.highlight .kc{font-weight:bold}.highlight .kd{font-weight:bold}.highlight .kp{font-weight:bold}.highlight .kr{font-weight:bold}.highlight .kt{font-weight:bold;color:#458}.highlight .m{color:#099}.highlight .s{color:#d14}.highlight .na{color:#008080}.highlight .nb{color:#0086b3}.highlight .nc{font-weight:bold;color:#458}.highlight .no{color:#008080}.highlight .ni{color:#800080}.highlight .ne{font-weight:bold;color:#900}.highlight .nf{font-weight:bold;color:#900}.highlight .nn{color:#555}.highlight .nt{color:#000080}.highlight .nv{color:#008080}.highlight .ow{font-weight:bold}.highlight .w{color:#bbb}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .sb{color:#d14}.highlight .sc{color:#d14}.highlight .sd{color:#d14}.highlight .s2{color:#d14}.highlight .se{color:#d14}.highlight .sh{color:#d14}.highlight .si{color:#d14}.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .bp{color:#999}.highlight .vc{color:#008080}.highlight .vg{color:#008080}.highlight .vi{color:#008080}.highlight .il{color:#099}.appear{visibility:hidden;opacity:0}.appeared{visibility:visible;opacity:1;transition:opacity 0.5s ease-in-out}.tags-page-header{margin-top:0px}.tags-page{padding:50px 0}.tags-page h1{margin:0 0 15px 0}.tag-list{display:flex;flex-wrap:wrap;gap:12px;padding:0;margin:40px 0;list-style:none}.tag-list-item{display:inline-block}.tag-list-item a{position:relative;display:inline-flex;align-items:center;padding:8px 16px;padding-right:28px;text-decoration:none;font-weight:500;font-size:0.95em; /* @alternate */ ;transition:-webkit-text-decoration 0.2s ease;transition:text-decoration 0.2s ease; /* @alternate */ ;transition:text-decoration 0.2s ease, -webkit-text-decoration 0.2s ease}.tag-list-item a:hover{text-decoration:underline}.tag-count{position:absolute;top:4px;right:8px;font-weight:700;font-size:0.75em;color:#1a1a1a;opacity:0.7}@media all and (max-width: 767px){.tag-list{display:block;margin:20px 0}.tag-list-item{display:block;margin-bottom:16px}.tag-list-item a{display:inline;padding:0;background:none;border:none;border-radius:0;font-size:1em;font-weight:400;text-decoration:none}.tag-list-item a:hover{background:none;border:none;transform:none;box-shadow:none}.tag-count{position:static;margin-left:8px;font-size:0.9em;font-weight:400;opacity:0.5}}pre{margin-top:1.5rem;margin-bottom:1.5rem;background-color:#faf9f9;padding:16px 0;border-radius:16px}pre code{background-color:#faf9f9;font-family:monospace;display:block;padding:0 20px;color:#1b2733;font-size:14px;line-height:20px;overflow-x:auto;white-space:pre;word-spacing:normal;word-break:break-all}pre code .keyword{color:#ff5600}pre code .type{color:#718c00}pre code .call{color:#1b2733}pre code .property{color:#1b2733}pre code .number{color:#db6f57}pre code .string{color:#fd8273}pre code .comment{color:#6b8a94}pre code .dotAccess{color:#92b300}pre code .preprocessing{color:#fba15e}
/*# sourceMappingURL=/assets/source-maps/light.scss.map */
/*# sourceURL=_assets/stylesheets/light.scss */
</style>
    
  

  <!-- open graph metadata -->
<meta property="og:title" content="Understanding the Role of Total Order Broadcast in Linearizability and Sequential Consistency">


<meta property="og:image" content="https://haoluo.io
">
<meta property="og:url" content="https://haoluo.ioamp/posts/total-order-broadcast-consistency-model">
<meta property="og:description" content="They&#39;re not obvious to me at first glance.">
<meta property="profile:first_name" content="Hao">
<meta property="profile:last_name" content="Luo">
<meta property="og:site_name" content="Hao Luo">


  
    <meta property="og:type" content="article">
    <meta property="article:author" content="Hao Luo">
    <meta property="article:published_time" content="2015-05-13T22:08:10-04:00">
    
      <meta property="article:tag" content="tech">
    
      <meta property="article:tag" content="distributedsystem">
    
  




<meta name="twitter:card" content="summary">
<meta name="twitter:url" content="https://haoluo.ioamp/posts/total-order-broadcast-consistency-model">

<meta name="twitter:title" content="Understanding the Role of Total Order Broadcast in Linearizability and Sequential Consistency">
<meta name="twitter:description" content="They&#39;re not obvious to me at first glance.">
<meta name="twitter:image" content="https://haoluo.io
">








  
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>

    <script async custom-element="amp-analytics"
      src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-install-serviceworker"
      src="https://cdn.ampproject.org/v0/amp-install-serviceworker-0.1.js"></script>

    
    <!-- amp-youtube doesn't work -->
    
    
    

    <script async src="https://cdn.ampproject.org/v0.js"></script>

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Understanding the Role of Total Order Broadcast in Linearizability and Sequential Consistency | Hao Luo</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Understanding the Role of Total Order Broadcast in Linearizability and Sequential Consistency" />
<meta name="author" content="Hao Luo" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="They’re not obvious to me at first glance." />
<meta property="og:description" content="They’re not obvious to me at first glance." />
<link rel="canonical" href="/posts/total-order-broadcast-consistency-model" />
<meta property="og:url" content="/posts/total-order-broadcast-consistency-model" />
<meta property="og:site_name" content="Hao Luo" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-05-13T22:08:10-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Understanding the Role of Total Order Broadcast in Linearizability and Sequential Consistency" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Hao Luo"},"dateModified":"2025-09-30T23:46:02-04:00","datePublished":"2015-05-13T22:08:10-04:00","description":"They’re not obvious to me at first glance.","headline":"Understanding the Role of Total Order Broadcast in Linearizability and Sequential Consistency","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/total-order-broadcast-consistency-model"},"url":"/posts/total-order-broadcast-consistency-model"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>

  
    <amp-analytics config="https://www.googletagmanager.com/amp.json?id=&gtm.url=SOURCE_URL"
        data-credentials="include">
      <script type="application/json">
        {
          "vars": {
            "gaTrackingId": ""
          }
        }
        </script>
    </amp-analytics>
  

  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        
        <nav class="header-nav">
  <div class="header-nav-inner">
    <div class="header-logo-container">
      <a href="/" class="header-logo" title="Hao Luo">
        Hao Luo
      </a>
      <span class="header-divider">|</span>
      <div class="header-emojis">
        <a href="https://run.haoluo.io/" title="Runner" target="_blank" rel="noopener noreferrer">🏃🏻‍♀️</a>
        <a href="https://www.instagram.com/yvetterowe_/reels/" title="Vlogger" target="_blank" rel="noopener noreferrer">🎬</a>
        <a href="https://www.linkedin.com/in/yvetterowe/" title="Builder" target="_blank" rel="noopener noreferrer">👩🏻‍💻</a>
      </div>
    </div>
    <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
    <ul class="header-links">
      <li>
        <a href="/" title="Posts" class="active">Posts</a>
      </li>
      <li>
        <a href="/tags" title="Tags">Tags</a>
      </li>
      <li>
        <a href="/about" title="About">About</a>
      </li>
    </ul>
  </div>
</nav>


        
        <article class="article">
  <header class="article-header">
  <h1>Understanding the Role of Total Order Broadcast in Linearizability and Sequential Consistency</h1>
  
  <p>They're not obvious to me at first glance.</p>
  <div class="article-list-footer">
    <span class="article-list-date">
      May 13, 2015
    </span>
    <div class="article-list-tags">
      
        
        
        
        <a href="/tag/tech">
          #TECH
        </a>
      
        
        
        
        <a href="/tag/distributedsystem">
          #DISTRIBUTED SYSTEM
        </a>
      
    </div>
  </div>
</header>
  <div class="article-content">
    
      <p>I learned the concept of <a href="%5Bhttps://en.wikipedia.org/wiki/Linearizability%5D(https://en.wikipedia.org/wiki/Linearizability)">linearizability</a> and <a href="%5Bhttps://en.wikipedia.org/wiki/Sequential_consistency%5D(https://en.wikipedia.org/wiki/Sequential_consistency)">sequential consistency</a> this semester in CS425 (Distributed System). To implement these two kinds of consistency models, we could consider the algorithms that use total order broadcast. At first, I was really confused about the philosophy behind the scene: <em>why total order broadcast is necessary for write request in both models?</em> <em>And why total order broadcast is only necessary for read request in linearizability but not sequential consistency?</em> I will try illustrating the idea in this article with some toy examples.</p>

<h3 id="1-implementation-with-total-order-broadcast">1. Implementation with total order broadcast</h3>
<p>First, let’s have a quick review of the implementation of both models.</p>

<h4 id="linearizaiblity">Linearizaiblity</h4>

<ul>
  <li>
<em>When <strong>read</strong> request arrives</em>: broadcast the request. When own broadcast message arrives, return value in local replica.</li>
  <li>
<em>When <strong>write</strong> request arrives</em>: broadcast the request. Upon receipt, each process updates its replica’s value. When own broadcast message arrives, respond with ack.</li>
</ul>

<h4 id="sequential-consistency">Sequential Consistency</h4>
<ul>
  <li>
<em>When <strong>read</strong> request arrives</em>: immediately return the value in local replica.</li>
  <li>
<em>When <strong>write</strong> request arrives</em>: broadcast the request. Upon receipt, each process updates its replica’s value. When own broadcast message arrives, respond with ack.</li>
</ul>

<p>Suppose there are two processes <code class="language-plaintext highlighter-rouge">P0</code> and <code class="language-plaintext highlighter-rouge">P1</code>. Both processes maintain the replica of two shared variables <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code>. The initial values are both 0. The black lines in all figures represent the real time line.</p>

<figure class="post">
  <amp-img class="image" src="/assets/posts/20150315/f1.png" alt="`P0` receives a write request A and a read request `B`. `P1` receives a write request `C` and a read request `D`." data-action="zoom" width="405" height="107" layout="responsive"><noscript><img class="image" src="/assets/posts/20150315/f1.png" alt="`P0` receives a write request A and a read request `B`. `P1` receives a write request `C` and a read request `D`." data-action="zoom" width="405" height="107"></noscript></amp-img>
  <figcaption class="post">`P0` receives a write request A and a read request `B`. `P1` receives a write request `C` and a read request `D`.</figcaption>
</figure>

<h3 id="2-how-should-linearizability-look-like">2. How should linearizability look like?</h3>
<p>First let’s consider the “linearizability”. What should request <code class="language-plaintext highlighter-rouge">B</code> and <code class="language-plaintext highlighter-rouge">D</code> return in order to achieve the “linearizability”? According to the definition, we should have the following constraints (Notice: here each operation is supposed to be instantaneous, which means that each ack/return happens right after receiving write/read request):</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">A</code> happens before <code class="language-plaintext highlighter-rouge">B</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">C</code> happens before <code class="language-plaintext highlighter-rouge">D</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">A</code> happens before <code class="language-plaintext highlighter-rouge">D</code> (with <code class="language-plaintext highlighter-rouge">D</code> returns 1 implicitly)</li>
  <li>
<code class="language-plaintext highlighter-rouge">C</code> happens before <code class="language-plaintext highlighter-rouge">B</code> (with <code class="language-plaintext highlighter-rouge">B</code> returns 1 implicitly)</li>
</ul>

<p>To satisfy these order constrains, four permutations of these operations could be derived:</p>

<figure class="post">
  <amp-img class="image" src="/assets/posts/20150315/f2.png" alt="Four permutations that satisfy linearizability constraints. (1)(2)(3)(4) denote the order of operations." data-action="zoom" width="1100" height="347" layout="responsive"><noscript><img class="image" src="/assets/posts/20150315/f2.png" alt="Four permutations that satisfy linearizability constraints. (1)(2)(3)(4) denote the order of operations." data-action="zoom" width="1100" height="347"></noscript></amp-img>
  <figcaption class="post">Four permutations that satisfy linearizability constraints. (1)(2)(3)(4) denote the order of operations.</figcaption>
</figure>

<h3 id="3-how-should-sequential-consistency-look-like">3. How should sequential consistency look like?</h3>
<p>So far (hopefully) you should be pretty clear about how the permutations that satisfy the “linearizability” are derived. Let’s move on to “sequential consistency”. “Sequential consistency” is a weaker condition than “linearizability”. By “weaker”, I mean “sequential consistency” does not force the permutation to respect the real-time order of non-overlapping operations as “linearizability” does. Instead, respecting the real-time order within each process is enough. Thus we could get rid of the last two constraints of “linearizability” for “sequential consistency”:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">A</code> happens before <code class="language-plaintext highlighter-rouge">B</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">C</code> happens before <code class="language-plaintext highlighter-rouge">D</code>
</li>
</ul>

<p>In this case, besides the four permutations (Figure 2) satisfying the “linearizability”, two more permutations that only satisfy “sequential consistency” but not “linearizability” could be derived:</p>

<figure class="post">
  <amp-img class="image" src="/assets/posts/20150315/f3.png" alt="Two permutations that only satisfy sequential consistency constrains but not linearizability. (1)(2)(3)(4) denote the order of operations." data-action="zoom" width="1100" height="147" layout="responsive"><noscript><img class="image" src="/assets/posts/20150315/f3.png" alt="Two permutations that only satisfy sequential consistency constrains but not linearizability. (1)(2)(3)(4) denote the order of operations." data-action="zoom" width="1100" height="147"></noscript></amp-img>
  <figcaption class="post">Two permutations that only satisfy sequential consistency constrains but not linearizability. (1)(2)(3)(4) denote the order of operations.</figcaption>
</figure>

<p>Let’s do some wrap up. So far, we derive four permutations (with the corresponding return values of read requests) for “linearizability”. These four permutations also satisfy “sequential consistency”. Besides these, we also derive two permutations that only satisfy “sequential consistency”. In total, 4 for “linearizability” and 6 for “sequential consistency”.</p>

<h3 id="4-write-request">4. Write request</h3>

<p>As we know, to implement “sequential consistency”, total order broadcast of the write request is needed.</p>

<h4 id="why-broadcast-the-write-request">Why broadcast the write request?</h4>
<p>This is pretty straightforward and trivial. The write request should be broadcasted since we want to maintain the consistency among all replicas in a distributed systems. For example, suppose you add an item to your shopping cart on Amazon and this “write” operation is conducted by one of the replicas. If you check your shopping cart later at another place and this “read” operation might be conducted by another replica. Under this scenario, what you expect to see is a shopping cart with the item you added previously, instead of an empty one.</p>

<h4 id="why-total-order-broadcast-the-write-request-for-sequential-consistency">Why total order broadcast the write request (for sequential consistency)?</h4>

<p>So far, we know we should broadcast the write request. But why the broadcasts should be in total order in order to achieve sequential consistency? Let’s first take the left case in Figure 3 as an example.</p>

<figure class="post">
  <amp-img class="image" src="/assets/posts/20150315/f4.png" alt="Broadcast write request. The left one is in total order while the right one is not. Both cases maintain the sequential consistency." data-action="zoom" width="1100" height="174" layout="responsive"><noscript><img class="image" src="/assets/posts/20150315/f4.png" alt="Broadcast write request. The left one is in total order while the right one is not. Both cases maintain the sequential consistency." data-action="zoom" width="1100" height="174"></noscript></amp-img>
  <figcaption class="post">Broadcast write request. The left one is in total order while the right one is not. Both cases maintain the sequential consistency.</figcaption>
</figure>

<p>In the left case of Figure 4, request <code class="language-plaintext highlighter-rouge">A</code> arrives before request <code class="language-plaintext highlighter-rouge">C</code> at both <code class="language-plaintext highlighter-rouge">P0</code> and <code class="language-plaintext highlighter-rouge">P1</code>. In the right case, however, request <code class="language-plaintext highlighter-rouge">A</code> arrives before request <code class="language-plaintext highlighter-rouge">C</code> in <code class="language-plaintext highlighter-rouge">P0</code> while the order is reversed in <code class="language-plaintext highlighter-rouge">P1</code>. Sequential consistency are satisfied in both cases no matter whether the write request broadcasts are in total order or not. Hmm, can we just come up with the conclusion that the broadcasts are not necessarily to be totally ordered?</p>

<p>Nope! Let’s try another example by making a trivial modification: change operation <code class="language-plaintext highlighter-rouge">C</code> from <code class="language-plaintext highlighter-rouge">write(y,1)</code> to <code class="language-plaintext highlighter-rouge">write(x,2)</code>. Now let’s see what happens.</p>

<figure class="post">
  <amp-img class="image" src="/assets/posts/20150315/f5.png" alt="Broadcast write request. The left one is in total order while the right one is not. The left one maintains the sequential consistency while the right one does not!" data-action="zoom" width="1100" height="166" layout="responsive"><noscript><img class="image" src="/assets/posts/20150315/f5.png" alt="Broadcast write request. The left one is in total order while the right one is not. The left one maintains the sequential consistency while the right one does not!" data-action="zoom" width="1100" height="166"></noscript></amp-img>
  <figcaption class="post">Broadcast write request. The left one is in total order while the right one is not. The left one maintains the sequential consistency while the right one does not!</figcaption>
</figure>

<p>I suppose you have noticed the difference :D  The sequential consistency condition with <code class="language-plaintext highlighter-rouge">A-&gt;B-&gt;C-&gt;D</code> order implicitly indicates <code class="language-plaintext highlighter-rouge">B</code> returns 0 and <code class="language-plaintext highlighter-rouge">D</code> returns 2. This works perfectly good with the left case where total ordered broadcast is used. But in the right case where broadcasted write requests are not in total order, <code class="language-plaintext highlighter-rouge">x</code> returns 1 instead of 2. The right case does not maintain sequential consistency.</p>

<p>Intuitively, the takeaway here is if multiple processes try to modify the same variable, we need to guarantee that these modifications happen in the same order among all replicas. Otherwise, conflict will arise (like right case in Figure 5).</p>

<h3 id="5-read-request">5. Read Request</h3>

<p>To achieve “linerizability”, we also need to total order broadcast the read request besides write request.</p>

<h4 id="why-also-total-order-broadcast-the-read-request-for-linearizability">Why also total order broadcast the read request (for linearizability)?</h4>

<p>This is a good question. You may wonder why it is necessary to broadcast the read request since it will not actually cause any change to any replica.</p>

<p>For this part, we will use the example in Figure 6 as illustration.</p>

<figure class="post">
  <amp-img class="image" src="/assets/posts/20150315/f6.png" alt=" `P0` receives a write request `A` followed by a read request `B`. `P1` receives a read request `C`, which is after `B` on the real time line." data-action="zoom" width="399" height="104" layout="responsive"><noscript><img class="image" src="/assets/posts/20150315/f6.png" alt=" `P0` receives a write request `A` followed by a read request `B`. `P1` receives a read request `C`, which is after `B` on the real time line." data-action="zoom" width="399" height="104"></noscript></amp-img>
  <figcaption class="post"> `P0` receives a write request `A` followed by a read request `B`. `P1` receives a read request `C`, which is after `B` on the real time line.</figcaption>
</figure>

<p>Now let’s do a simple quiz. What should <code class="language-plaintext highlighter-rouge">B</code> and <code class="language-plaintext highlighter-rouge">C</code> return respectively in order to maintain “linearizability”? Think about it for five seconds and then compare your solution with Figure 7.</p>

<figure class="post">
  <amp-img class="image" src="/assets/posts/20150315/f7.png" alt="`B` and `C` should both return 1 to maintain linearizability." data-action="zoom" width="392" height="102" layout="responsive"><noscript><img class="image" src="/assets/posts/20150315/f7.png" alt="`B` and `C` should both return 1 to maintain linearizability." data-action="zoom" width="392" height="102"></noscript></amp-img>
  <figcaption class="post">`B` and `C` should both return 1 to maintain linearizability.</figcaption>
</figure>

<p>Hope you get the correct answer! To put it short, “linearizability” requires the three operations to happen in <code class="language-plaintext highlighter-rouge">A-&gt;B-&gt;C</code> order. Thus <code class="language-plaintext highlighter-rouge">B</code> and <code class="language-plaintext highlighter-rouge">C</code> must show that they have seen the effect of <code class="language-plaintext highlighter-rouge">A</code>. Then the question comes again: what do the request broadcasts look like behind the scene? Let’s first only consider the total order broadcast for write request since we have discussed it previously.</p>

<figure class="post">
  <amp-img class="image" src="/assets/posts/20150315/f8.png" alt="`P1` receives `P0`'s broadcast message of request `A` before receiving its own read request `C`." data-action="zoom" width="400" height="117" layout="responsive"><noscript><img class="image" src="/assets/posts/20150315/f8.png" alt="`P1` receives `P0`'s broadcast message of request `A` before receiving its own read request `C`." data-action="zoom" width="400" height="117"></noscript></amp-img>
  <figcaption class="post">`P1` receives `P0`'s broadcast message of request `A` before receiving its own read request `C`.</figcaption>
</figure>

<p>The scenario in Figure 8 seems good: linearizability is maintained only with broadcast of write request. But never forget that it is just one of the possibilities. We cannot guarantee that the broadcast message always arrive at a perfect time. Believe it or not, let’s have a look at the scenario in Figure 9.</p>

<figure class="post">
  <amp-img class="image" src="/assets/posts/20150315/f9.png" alt=" `P1` receives `P0`'s broadcast message of request `A` after receiving its own read request `C`." data-action="zoom" width="426" height="125" layout="responsive"><noscript><img class="image" src="/assets/posts/20150315/f9.png" alt=" `P1` receives `P0`'s broadcast message of request `A` after receiving its own read request `C`." data-action="zoom" width="426" height="125"></noscript></amp-img>
  <figcaption class="post"> `P1` receives `P0`'s broadcast message of request `A` after receiving its own read request `C`.</figcaption>
</figure>

<p>Oops, that is not what we expect. As discussed before, we require <code class="language-plaintext highlighter-rouge">C</code> to return 1 to maintain “linearizability”. But since <code class="language-plaintext highlighter-rouge">P1</code> sees the effect of <code class="language-plaintext highlighter-rouge">A</code> (receives <code class="language-plaintext highlighter-rouge">A</code>’s broadcast message) after receiving its own read request <code class="language-plaintext highlighter-rouge">C</code>, it could only return 0 instead of 1. “Linearizability” cannot be reached. Then comes the question again: can we figure out an approach that helps “linearizability” survive both cases (Figure 8 and Figure 9)? That’s the reason why we need total order broadcast of read request, as is shown in Figure 10.</p>

<figure class="post">
  <amp-img class="image" src="/assets/posts/20150315/f10.png" alt="The total order broadcast of both write request and read request could guarantee linearizability." data-action="zoom" width="487" height="121" layout="responsive"><noscript><img class="image" src="/assets/posts/20150315/f10.png" alt="The total order broadcast of both write request and read request could guarantee linearizability." data-action="zoom" width="487" height="121"></noscript></amp-img>
  <figcaption class="post">The total order broadcast of both write request and read request could guarantee linearizability.</figcaption>
</figure>

<p>Figure 10 may seem a little bit messy at the first glance, thus I differentiate the broadcast messages of requests with different colors and message ids. For example, the “green” messages <code class="language-plaintext highlighter-rouge">mA0</code> and <code class="language-plaintext highlighter-rouge">mA1</code> are the broadcast messages of request <code class="language-plaintext highlighter-rouge">A</code> to <code class="language-plaintext highlighter-rouge">P0</code> and <code class="language-plaintext highlighter-rouge">P1</code> respectively.</p>

<p>From the figure we can see the total order broadcast is used to guarantee that requests arrive at <code class="language-plaintext highlighter-rouge">P0</code> and <code class="language-plaintext highlighter-rouge">P1</code> both in <code class="language-plaintext highlighter-rouge">A-&gt;B-&gt;C</code> order. How to implement the total order broadcast is beyond the scope of this article, thus for now you could just assume that there is some magic that guarantees such an order. We find that even though <code class="language-plaintext highlighter-rouge">P1</code> still receives <code class="language-plaintext highlighter-rouge">A</code> after receiving <code class="language-plaintext highlighter-rouge">C</code> as in Figure 9, it delays the response of <code class="language-plaintext highlighter-rouge">C</code> until it could actually “see” the effect of <code class="language-plaintext highlighter-rouge">A</code>. In this case, <code class="language-plaintext highlighter-rouge">P1</code> could return 1 for request <code class="language-plaintext highlighter-rouge">C</code> - the linearizability is satisfied!</p>

<p>Can you figure out why total order broadcast of read request is not necessary for sequential consistency as an exercise?</p>

    
  </div>
  <div class="article-pagination">
  
  
</div>

  
</article>


  
    
<script type="application/ld+json">
{
   "@context":"http://schema.org",
   "@type":"BlogPosting",
   "headline":"Understanding the Role of Total Order Broadcast in Linearizability and Sequential Consistency",
   "keywords":"tech, distributedsystem",
   "wordCount":"1555",
   "url":"https://haoluo.ioamp/posts/total-order-broadcast-consistency-model",
   "datePublished":"2015-05-13",
   "dateModified":"2025-09-30",
   "author": {
    "@context": "http://schema.org",
    "@type": "Person",
    "url": "http://haoluo.io"
}
,
   "publisher": {
      "@type": "Organization",
      "name": "Hao Luo",
      "logo": {
        "@type": "ImageObject",
      }
    },
    "image":"https://haoluo.io
",
    "mainEntityOfPage":{
      "@type":"WebPage",
      "@id":"https://haoluo.ioamp/posts/total-order-broadcast-consistency-model"
    },
    "articleBody":"I learned the concept of linearizability and sequential consistency this semester in CS425 (Distributed System). To implement these two kinds of consistency models, we could consider the algorithms that use total order broadcast. At first, I was really confused about the philosophy behind the scene: why total order broadcast is necessary for write request in both models? And why total order broadcast is only necessary for read request in linearizability but not sequential consistency? I will try illustrating the idea in this article with some toy examples.1. Implementation with total order broadcastFirst, let’s have a quick review of the implementation of both models.Linearizaiblity  When read request arrives: broadcast the request. When own broadcast message arrives, return value in local replica.  When write request arrives: broadcast the request. Upon receipt, each process updates its replica’s value. When own broadcast message arrives, respond with ack.Sequential Consistency  When read request arrives: immediately return the value in local replica.  When write request arrives: broadcast the request. Upon receipt, each process updates its replica’s value. When own broadcast message arrives, respond with ack.Suppose there are two processes P0 and P1. Both processes maintain the replica of two shared variables x and y. The initial values are both 0. The black lines in all figures represent the real time line.{% include image.html type=page.imagetype path=”posts/20150315/f1.png” path-detail=”posts/20150315/f1.png” alt=”Figure 1.” caption=”P0 receives a write request A and a read request B. P1 receives a write request C and a read request D.”%}2. How should linearizability look like?First let’s consider the “linearizability”. What should request B and D return in order to achieve the “linearizability”? According to the definition, we should have the following constraints (Notice: here each operation is supposed to be instantaneous, which means that each ack/return happens right after receiving write/read request):  A happens before B  C happens before D  A happens before D (with D returns 1 implicitly)  C happens before B (with B returns 1 implicitly)To satisfy these order constrains, four permutations of these operations could be derived:{% include image.html type=page.imagetype path=”posts/20150315/f2.png” path-detail=”posts/20150315/f2.png” alt=”Figure 2.” caption=”Four permutations that satisfy linearizability constraints. (1)(2)(3)(4) denote the order of operations.” %}3. How should sequential consistency look like?So far (hopefully) you should be pretty clear about how the permutations that satisfy the “linearizability” are derived. Let’s move on to “sequential consistency”. “Sequential consistency” is a weaker condition than “linearizability”. By “weaker”, I mean “sequential consistency” does not force the permutation to respect the real-time order of non-overlapping operations as “linearizability” does. Instead, respecting the real-time order within each process is enough. Thus we could get rid of the last two constraints of “linearizability” for “sequential consistency”:  A happens before B  C happens before DIn this case, besides the four permutations (Figure 2) satisfying the “linearizability”, two more permutations that only satisfy “sequential consistency” but not “linearizability” could be derived:{% include image.html type=page.imagetype path=”posts/20150315/f3.png” path-detail=”posts/20150315/f3.png” alt=”Figure 3.” caption=”Two permutations that only satisfy sequential consistency constrains but not linearizability. (1)(2)(3)(4) denote the order of operations.” %}Let’s do some wrap up. So far, we derive four permutations (with the corresponding return values of read requests) for “linearizability”. These four permutations also satisfy “sequential consistency”. Besides these, we also derive two permutations that only satisfy “sequential consistency”. In total, 4 for “linearizability” and 6 for “sequential consistency”.4. Write requestAs we know, to implement “sequential consistency”, total order broadcast of the write request is needed.Why broadcast the write request?This is pretty straightforward and trivial. The write request should be broadcasted since we want to maintain the consistency among all replicas in a distributed systems. For example, suppose you add an item to your shopping cart on Amazon and this “write” operation is conducted by one of the replicas. If you check your shopping cart later at another place and this “read” operation might be conducted by another replica. Under this scenario, what you expect to see is a shopping cart with the item you added previously, instead of an empty one.Why total order broadcast the write request (for sequential consistency)?So far, we know we should broadcast the write request. But why the broadcasts should be in total order in order to achieve sequential consistency? Let’s first take the left case in Figure 3 as an example.{% include image.html type=page.imagetype path=”posts/20150315/f4.png” path-detail=”posts/20150315/f4.png” alt=”Figure 4.” caption=”Broadcast write request. The left one is in total order while the right one is not. Both cases maintain the sequential consistency.” %}In the left case of Figure 4, request A arrives before request C at both P0 and P1. In the right case, however, request A arrives before request C in P0 while the order is reversed in P1. Sequential consistency are satisfied in both cases no matter whether the write request broadcasts are in total order or not. Hmm, can we just come up with the conclusion that the broadcasts are not necessarily to be totally ordered?Nope! Let’s try another example by making a trivial modification: change operation C from write(y,1) to write(x,2). Now let’s see what happens.{% include image.html type=page.imagetype path=”posts/20150315/f5.png” path-detail=”posts/20150315/f5.png” alt=”Figure 5.” caption=”Broadcast write request. The left one is in total order while the right one is not. The left one maintains the sequential consistency while the right one does not!”%}I suppose you have noticed the difference :D  The sequential consistency condition with A-&amp;gt;B-&amp;gt;C-&amp;gt;D order implicitly indicates B returns 0 and D returns 2. This works perfectly good with the left case where total ordered broadcast is used. But in the right case where broadcasted write requests are not in total order, x returns 1 instead of 2. The right case does not maintain sequential consistency.Intuitively, the takeaway here is if multiple processes try to modify the same variable, we need to guarantee that these modifications happen in the same order among all replicas. Otherwise, conflict will arise (like right case in Figure 5).5. Read RequestTo achieve “linerizability”, we also need to total order broadcast the read request besides write request.Why also total order broadcast the read request (for linearizability)?This is a good question. You may wonder why it is necessary to broadcast the read request since it will not actually cause any change to any replica.For this part, we will use the example in Figure 6 as illustration.{% include image.html type=page.imagetype path=”posts/20150315/f6.png” path-detail=”posts/20150315/f6.png” alt=”Figure 6.” caption=” P0 receives a write request A followed by a read request B. P1 receives a read request C, which is after B on the real time line.”%}Now let’s do a simple quiz. What should B and C return respectively in order to maintain “linearizability”? Think about it for five seconds and then compare your solution with Figure 7.{% include image.html type=page.imagetype path=”posts/20150315/f7.png” path-detail=”posts/20150315/f7.png” alt=”Figure 7.” caption=”B and C should both return 1 to maintain linearizability.”%}Hope you get the correct answer! To put it short, “linearizability” requires the three operations to happen in A-&amp;gt;B-&amp;gt;C order. Thus B and C must show that they have seen the effect of A. Then the question comes again: what do the request broadcasts look like behind the scene? Let’s first only consider the total order broadcast for write request since we have discussed it previously.{% include image.html type=page.imagetype path=”posts/20150315/f8.png” path-detail=”posts/20150315/f8.png” alt=”Figure 8.” caption=”P1 receives P0’s broadcast message of request A before receiving its own read request C.”%}The scenario in Figure 8 seems good: linearizability is maintained only with broadcast of write request. But never forget that it is just one of the possibilities. We cannot guarantee that the broadcast message always arrive at a perfect time. Believe it or not, let’s have a look at the scenario in Figure 9.{% include image.html type=page.imagetype path=”posts/20150315/f9.png” path-detail=”posts/20150315/f9.png” alt=”Figure 9.” caption=” P1 receives P0’s broadcast message of request A after receiving its own read request C.”%}Oops, that is not what we expect. As discussed before, we require C to return 1 to maintain “linearizability”. But since P1 sees the effect of A (receives A’s broadcast message) after receiving its own read request C, it could only return 0 instead of 1. “Linearizability” cannot be reached. Then comes the question again: can we figure out an approach that helps “linearizability” survive both cases (Figure 8 and Figure 9)? That’s the reason why we need total order broadcast of read request, as is shown in Figure 10.{% include image.html type=page.imagetype path=”posts/20150315/f10.png” path-detail=”posts/20150315/f10.png” alt=”Figure 10.” caption=”The total order broadcast of both write request and read request could guarantee linearizability.” %}Figure 10 may seem a little bit messy at the first glance, thus I differentiate the broadcast messages of requests with different colors and message ids. For example, the “green” messages mA0 and mA1 are the broadcast messages of request A to P0 and P1 respectively.From the figure we can see the total order broadcast is used to guarantee that requests arrive at P0 and P1 both in A-&amp;gt;B-&amp;gt;C order. How to implement the total order broadcast is beyond the scope of this article, thus for now you could just assume that there is some magic that guarantees such an order. We find that even though P1 still receives A after receiving C as in Figure 9, it delays the response of C until it could actually “see” the effect of A. In this case, P1 could return 1 for request C - the linearizability is satisfied!Can you figure out why total order broadcast of read request is not necessary for sequential consistency as an exercise?"
}
</script>
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
      "@type": "ListItem",
      "position": 1,
      "item": {
        "@id": "https://haoluo.io/about",
        "name": "Hao Luo"
      }
    }, {
      "@type": "ListItem",
      "position": 2,
      "item": {
        "@id": "https://haoluo.io",
        "name": "Posts"
      }
    }, {
      "@type": "ListItem",
      "position": 3,
      "item": {
        "@id": "https://haoluo.ioamp/posts/total-order-broadcast-consistency-model",
        "name": "Understanding the Role of Total Order Broadcast in Linearizability and Sequential Consistency",
        "image": "https://haoluo.io
"
      }
    }]
  }
</script>
  




        
        <footer class="footer">
  <p>
    © 2025 <a href="https://haoluo.io/" rel="noopener noreferrer" target="_blank" title="Hao Luo">Hao Luo</a> Kudos to
    <a href="https://github.com/jekyll/jekyll" rel="noopener noreferrer" target="_blank" title="Jekyll" aria-label="Jekyll - Generator">Jekyll</a>
    &amp;
    <a target="_blank" href="https://github.com/nielsenramon/chalk" rel="noopener noreferrer" title="Chalk" aria-label="Chalk - Theme">Chalk</a>
  </p>

  <!-- Fathom - simple website analytics - https://usefathom.com -->
  <script>
  (function(f, a, t, h, o, m){
  a[h]=a[h]||function(){
  (a[h].q=a[h].q||[]).push(arguments)
  };
  o=f.createElement('script'),
  m=f.getElementsByTagName('script')[0];
  o.async=1; o.src=t; o.id='fathom-script';
  m.parentNode.insertBefore(o,m)
  })(document, window, 'https://cdn.usefathom.com/tracker.js', 'fathom');
  fathom('set', 'siteId', 'HIYTKGPC');
  fathom('trackPageview');
  </script>
  <!-- / Fathom -->
</footer>

      </div>
    </div>
  </main>

  
  
  <amp-install-serviceworker
    src="https://haoluo.io/assets/sw.js"
    layout="nodisplay"></amp-install-serviceworker>


</body>
</html>
